(this["webpackJsonpboeren-bridge"]=this["webpackJsonpboeren-bridge"]||[]).push([[0],{20:function(e,t,r){e.exports=r(34)},33:function(e,t,r){},34:function(e,t,r){"use strict";r.r(t);var a,n,i,c,o,s,l,u,b,m,d,p,h,f,y,g=r(0),O=r.n(g),v=r(15),E=r.n(v),j=r(5),k=r(7),w=r.n(k),N=r(3),T=r(6),R=r(2),x=(r(9),r(1)),z=r(4),I=r(16),S=r(17),G=(a=function e(t){Object(T.a)(this,e),Object(N.a)(this,"id",n,this),Object(N.a)(this,"name",i,this),this.name=t,this.id=Object(S.v1)()},n=Object(R.a)(a.prototype,"id",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(R.a)(a.prototype,"name",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a);!function(e){e[e.Guess=0]="Guess",e[e.Play=1]="Play",e[e.Score=2]="Score",e[e.End=3]="End"}(c||(c={}));var C,P,M,F,H,B,A,V,D,J,W,K,$,q,L,Q,U,X,Y,Z,_,ee,te,re,ae,ne=(o=Object(z.persist)("list"),s=Object(z.persist)("list"),l=function e(t,r,a){Object(T.a)(this,e),Object(N.a)(this,"roundNumber",u,this),Object(N.a)(this,"guessOrder",b,this),Object(N.a)(this,"amountOfTricks",m,this),Object(N.a)(this,"step",d,this),Object(N.a)(this,"guessIndex",p,this),Object(N.a)(this,"guessedTricks",h,this),Object(N.a)(this,"scoreIndex",f,this),Object(N.a)(this,"scores",y,this),this.roundNumber=t,this.guessOrder=r,this.amountOfTricks=a},u=Object(R.a)(l.prototype,"roundNumber",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=Object(R.a)(l.prototype,"guessOrder",[x.observable,o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(R.a)(l.prototype,"amountOfTricks",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(R.a)(l.prototype,"step",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Guess}}),p=Object(R.a)(l.prototype,"guessIndex",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=Object(R.a)(l.prototype,"guessedTricks",[x.observable,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=Object(R.a)(l.prototype,"scoreIndex",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=Object(R.a)(l.prototype,"scores",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l),ie=function(e){for(var t,r,a=e.length;0!==a;)r=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[r],e[r]=t;return e};!function(e){e[e.New=0]="New",e[e.Round=1]="Round",e[e.Finished=2]="Finished"}(C||(C={}));var ce,oe,se,le,ue=new Audio("".concat("/boeren-bridge","/audio/attack.mp3")),be=new Audio("".concat("/boeren-bridge","/audio/yeah.mp3")),me=(P=Object(z.persist)("list"),M=Object(z.persist)("list"),F=Object(z.persist)("list"),H=Object(z.persist)("list"),B=function(){function e(){Object(T.a)(this,e),Object(N.a)(this,"roundNumber",A,this),Object(N.a)(this,"roundHistory",V,this),Object(N.a)(this,"minTricks",D,this),Object(N.a)(this,"maxTricks",J,this),Object(N.a)(this,"players",W,this),Object(N.a)(this,"playerOrder",K,this),Object(N.a)(this,"roundTricks",$,this),Object(N.a)(this,"loopTricksBack",q,this),Object(N.a)(this,"setMinTricks",L,this),Object(N.a)(this,"setMaxTricks",Q,this),Object(N.a)(this,"addPlayer",U,this),Object(N.a)(this,"removePlayer",X,this),Object(N.a)(this,"resetGame",Y,this),Object(N.a)(this,"startGame",Z,this),Object(N.a)(this,"nextRound",_,this),Object(N.a)(this,"resetRound",ee,this),Object(N.a)(this,"guessTricks",te,this),Object(N.a)(this,"setScore",re,this),Object(N.a)(this,"setScores",ae,this)}return Object(I.a)(e,[{key:"currentRound",get:function(){return this.roundHistory[this.roundHistory.length-1]}},{key:"totalTricks",get:function(){return this.currentRound.guessedTricks.reduce((function(e,t){return e+t.amount}),0)}},{key:"lastGuess",get:function(){return this.currentRound.guessIndex===this.currentRound.guessOrder.length-1}}]),e}(),A=Object(R.a)(B.prototype,"roundNumber",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=Object(R.a)(B.prototype,"roundHistory",[x.observable,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=Object(R.a)(B.prototype,"minTricks",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),J=Object(R.a)(B.prototype,"maxTricks",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),W=Object(R.a)(B.prototype,"players",[x.observable,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=Object(R.a)(B.prototype,"playerOrder",[x.observable,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=Object(R.a)(B.prototype,"roundTricks",[x.observable,H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=Object(R.a)(B.prototype,"loopTricksBack",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=Object(R.a)(B.prototype,"setMinTricks",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t<1||t>e.maxTricks||(e.minTricks=t)}}}),Q=Object(R.a)(B.prototype,"setMaxTricks",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t<e.minTricks||(e.maxTricks=t)}}}),U=Object(R.a)(B.prototype,"addPlayer",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=new G(t);e.players.push(r),e.playerOrder.push(r.id)}}}),X=Object(R.a)(B.prototype,"removePlayer",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.players=e.players.filter((function(e){return e.id!==t})),e.playerOrder=e.playerOrder.filter((function(e){return e!==t}))}}}),Y=Object(R.a)(B.prototype,"resetGame",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.roundNumber=0,e.roundHistory=[],e.minTricks=4,e.maxTricks=8,e.players=[],e.playerOrder=[],e.roundTricks=[],Oe.router.updateRoute(C.New)}}}),Z=Object(R.a)(B.prototype,"startGame",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(!(e.players.length<2)){for(var t=e.minTricks;t<=e.maxTricks;t+=1)e.roundTricks.push(t);if(e.loopTricksBack)for(var r=e.maxTricks;r>=e.minTricks;r-=1)e.roundTricks.push(r);e.playerOrder=ie(e.playerOrder),e.nextRound(),Oe.router.updateRoute(C.Round)}}}}),_=Object(R.a)(B.prototype,"nextRound",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e.roundNumber>=e.roundTricks.length)return be.play(),void Oe.router.updateRoute(C.Finished);t&&(e.roundNumber+=1);for(var r=(e.roundNumber-1)%e.players.length,a=[],n=0;n<e.playerOrder.length;n+=1){var i=(n+r)%e.playerOrder.length;a.push(e.playerOrder[i])}var c=new ne(e.roundNumber,a,e.roundTricks[e.roundNumber-1]);e.roundHistory.push(c)}}}),ee=Object(R.a)(B.prototype,"resetRound",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.roundHistory.pop(),e.nextRound(!1)}}}),Object(R.a)(B.prototype,"currentRound",[x.computed],Object.getOwnPropertyDescriptor(B.prototype,"currentRound"),B.prototype),te=Object(R.a)(B.prototype,"guessTricks",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){null==t||t<0||t>e.currentRound.amountOfTricks||e.lastGuess&&e.totalTricks+t===e.currentRound.amountOfTricks||(e.currentRound.guessedTricks.push({playerId:e.currentRound.guessOrder[e.currentRound.guessIndex],amount:t}),e.currentRound.guessIndex++,e.currentRound.guessIndex===e.currentRound.guessOrder.length&&(ue.play(),e.currentRound.step=c.Play))}}}),re=Object(R.a)(B.prototype,"setScore",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){var a,n=e.currentRound.guessedTricks[e.currentRound.scoreIndex].amount;if(t)a=n;else{if(null==r)return;a=Math.abs(n-r)}e.currentRound.scores.push({playerId:e.currentRound.guessOrder[e.currentRound.scoreIndex],score:t?10+2*a:2*a*-1}),e.currentRound.scoreIndex++,e.currentRound.scoreIndex>=e.currentRound.guessOrder.length&&(e.currentRound.step=c.End)}}}),ae=Object(R.a)(B.prototype,"setScores",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentRound.step=c.Score}}}),Object(R.a)(B.prototype,"totalTricks",[x.computed],Object.getOwnPropertyDescriptor(B.prototype,"totalTricks"),B.prototype),Object(R.a)(B.prototype,"lastGuess",[x.computed],Object.getOwnPropertyDescriptor(B.prototype,"lastGuess"),B.prototype),B),de=new Audio("".concat("/boeren-bridge","/audio/soundtrack.mp3"));de.loop=!0;var pe,he,fe,ye,ge=(ce=function e(){Object(T.a)(this,e),Object(N.a)(this,"route",oe,this),Object(N.a)(this,"refresh",se,this),Object(N.a)(this,"updateRoute",le,this)},oe=Object(R.a)(ce.prototype,"route",[x.observable,z.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.New}}),se=Object(R.a)(ce.prototype,"refresh",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.route===C.New?de.play():de.pause()}}}),le=Object(R.a)(ce.prototype,"updateRoute",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t===C.New?de.play():de.pause(),e.route=t}}}),ce),Oe=new(pe=function e(){var t=this;Object(T.a)(this,e),this.hydrate=void 0,Object(N.a)(this,"game",he,this),Object(N.a)(this,"router",fe,this),Object(N.a)(this,"loaded",ye,this),this.hydrateStores=function(){return w.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,w.a.awrap(t.hydrate("game",t.game));case 3:return e.next=5,w.a.awrap(t.hydrate("router",t.router));case 5:t.loaded=!0;case 6:case"end":return e.stop()}}))},this.hydrate=Object(z.create)({storage:{setItem:function(e,t){return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w.a.awrap(localStorage.setItem(e,t));case 2:case"end":return r.stop()}}))},getItem:function(e){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(e));case 1:case"end":return t.stop()}}))}}}),this.game=new me,this.router=new ge,this.hydrateStores()},he=Object(R.a)(pe.prototype,"game",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=Object(R.a)(pe.prototype,"router",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=Object(R.a)(pe.prototype,"loaded",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe),ve=O.a.createContext(Oe),Ee=function(){return O.a.useContext(ve)},je=r(18),ke=Object(j.a)((function(){var e=Ee().game,t=e.minTricks,r=e.setMinTricks,a=e.maxTricks,n=e.setMaxTricks,i=e.players,c=e.addPlayer,o=e.removePlayer,s=e.startGame,l=Object(g.useState)(""),u=Object(je.a)(l,2),b=u[0],m=u[1];return O.a.createElement("div",{className:"card",style:{marginTop:"1rem"}},O.a.createElement("h5",{className:"card-header"},"Nieuw spel"),O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm"},O.a.createElement("div",{className:"input-group mb-3"},O.a.createElement("input",{type:"text",className:"form-control",placeholder:"Naam",value:b,onChange:function(e){return m(e.target.value)}}),O.a.createElement("div",{className:"input-group-append"},O.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){c(b),m("")}},"Toevoegen"))))),O.a.createElement("div",{className:"table-responsive-xl"},O.a.createElement("table",{className:"table table-striped"},O.a.createElement("thead",null,O.a.createElement("tr",null,O.a.createElement("th",{scope:"col",colSpan:2},"Spelers"))),O.a.createElement("tbody",null,i.length?i.map((function(e){return O.a.createElement("tr",{key:e.id},O.a.createElement("td",null,e.name),O.a.createElement("td",{style:{width:"10%"}},O.a.createElement("button",{className:"btn btn-sm btn-danger",type:"button",onClick:function(){return o(e.id)}},"Verwijderen")))})):O.a.createElement("tr",null,O.a.createElement("td",null,"Nog geen spelers toegevoegd."))))),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{htmlFor:"minTricks"},"Minimaal aantal slagen"),O.a.createElement("input",{type:"number",className:"form-control",id:"minTricks",value:t,onChange:function(e){return r(parseInt(e.target.value,10))}}))),O.a.createElement("div",{className:"col"},O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{htmlFor:"maxTricks"},"Maximaal aantal slagen"),O.a.createElement("input",{type:"number",className:"form-control",id:"maxTricks",value:a,onChange:function(e){return n(parseInt(e.target.value,10))}})))),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block",onClick:s},"Beginnen")))))})),we=r(8),Ne=Object(j.a)((function(e){var t=e.game,r=t.players,a=t.currentRound,n=a.scoreIndex,i=a.guessOrder,c=a.guessedTricks,o=a.amountOfTricks,s=t.setScore,l=r.find((function(e){return e.id===i[n]})),u=c.find((function(e){return e.playerId===i[n]}));return l&&u?O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"row",style:{margin:"1rem 0"}},O.a.createElement("div",{className:"col"},"Behaalde score voor: ",O.a.createElement("b",null,l.name),". Verwachte slagen:"," ",O.a.createElement("b",null,u.amount))),O.a.createElement("div",{className:"row",style:{margin:"1rem 0"}},O.a.createElement("div",{className:"col"},O.a.createElement("b",null,"Behaalde slagen:"))),O.a.createElement("div",{className:"row",style:{margin:"1rem 0"}},O.a.createElement("div",{className:"col-sm"},O.a.createElement("button",{className:"btn btn-success btn-lg btn-block",type:"button",onClick:function(){return s(!0,0)}},"Goed")),O.a.createElement("div",{className:"col-sm"},O.a.createElement("div",{className:"btn-group btn-block",role:"group"},Object(we.a)(Array(o+1)).map((function(e,t){return u.amount===t?null:O.a.createElement("button",{type:"button",className:"btn btn-lg btn-danger",onClick:function(){return s(!1,t)},key:t},t)})))))):null})),Te=Object(j.a)((function(e){var t=e.game,r=t.players,a=t.currentRound,n=a.guessIndex,i=a.guessOrder,c=a.amountOfTricks,o=t.guessTricks,s=t.totalTricks,l=t.lastGuess,u=r.find((function(e){return e.id===i[n]}));return u?O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm"},O.a.createElement("p",{className:"text-left"},"Verwachte slagen voor ",O.a.createElement("b",null,u.name)))),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm"},O.a.createElement("div",{className:"input-group mb-3"},O.a.createElement("div",{className:"btn-group btn-block",role:"group"},Object(we.a)(Array(c+1)).map((function(e,t){return l&&s+t===c?null:O.a.createElement("button",{type:"button",className:"btn btn-lg btn-success",onClick:function(){return o(t)},key:t},t)}))))))):null})),Re=Object(j.a)((function(e){var t=e.game,r=t.currentRound.step,a=t.setScores,n=t.nextRound;switch(r){case c.Guess:return O.a.createElement(Te,{game:t});case c.Play:return O.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:a,style:{margin:"1rem 0"}},"Scores invoeren");case c.Score:return O.a.createElement(Ne,{game:t});case c.End:return O.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return n()},style:{margin:"1rem 0"}},"Volgende ronde")}})),xe=r(19),ze=Object(j.a)((function(e){var t=e.players,r=e.rounds,a=e.reverse;return O.a.createElement("div",{className:"table-responsive-xl"},O.a.createElement("table",{className:"table table-striped"},O.a.createElement("thead",null,O.a.createElement("tr",null,O.a.createElement("th",{scope:"col"},"Ronde"),O.a.createElement("th",{scope:"col"},"Slagen"),t.map((function(e){return O.a.createElement(g.Fragment,{key:e.id},O.a.createElement("th",{scope:"col"},e.name),O.a.createElement("th",{scope:"col"},"Verwacht"))})))),O.a.createElement("tbody",null,(a?Object(we.a)(r).reverse():r).map((function(e){return O.a.createElement(Ie,{round:e,players:t,key:e.roundNumber})})),O.a.createElement(Se,{rounds:r,players:t}))))})),Ie=Object(j.a)((function(e){var t=e.round,r=e.players,a={padding:"0.25rem 0.75rem"};return O.a.createElement("tr",{key:t.roundNumber},O.a.createElement("td",{style:a},t.roundNumber),O.a.createElement("td",{style:a},t.amountOfTricks),r.map((function(e){var n=t.guessedTricks.find((function(t){return t.playerId===e.id}));if(!t.scores.length||t.scores.length!==r.length)return O.a.createElement(g.Fragment,{key:e.id},O.a.createElement("td",{style:a},"-"),O.a.createElement("td",{style:a},n?n.amount:"-"));var i=t.scores.find((function(t){return t.playerId===e.id}));return O.a.createElement(g.Fragment,{key:e.id},O.a.createElement("td",{style:a},null===i||void 0===i?void 0:i.score),O.a.createElement("td",{style:Object(xe.a)({},a,{},i&&i.score<0?{color:"red"}:{})},null===n||void 0===n?void 0:n.amount))})))})),Se=Object(j.a)((function(e){var t=e.rounds,r=e.players,a=new Map;return t.forEach((function(e){e.scores.forEach((function(e){a.has(e.playerId)?a.set(e.playerId,a.get(e.playerId)+e.score):a.set(e.playerId,e.score)}))})),O.a.createElement("tr",null,O.a.createElement("th",{colSpan:2},"Totaal"),r.map((function(e){var t=a.get(e.id);return O.a.createElement("td",{key:e.id,colSpan:2,className:"twee"},t||"-")})))})),Ge=Object(j.a)((function(){var e=Ee(),t=e.game,r=e.game,a=r.roundNumber,n=r.players,i=r.roundHistory,c=r.resetRound,o=r.currentRound,s=o.guessOrder,l=o.amountOfTricks,u=r.resetGame,b=n.find((function(e){return e.id===s[n.length-1]}));return b?O.a.createElement("div",{className:"card",style:{marginTop:"1rem"}},O.a.createElement("h5",{className:"card-header"},"Ronde ",a," - Aantal slagen ",O.a.createElement("b",null,l)),O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement("b",null,b.name)," moet deze ronde schudden")),O.a.createElement("hr",null),O.a.createElement(Re,{game:t}),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement(ze,{rounds:i,players:n,reverse:!0}))),O.a.createElement("hr",null),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement("button",{className:"btn btn-danger btn-block",type:"button",onClick:c},"Herstart ronde"))),O.a.createElement("button",{style:{width:"10rem",position:"fixed",bottom:"1rem",left:"1rem"},className:"btn btn-danger btn-block",type:"button",onClick:function(){window.confirm("Herstarten?")&&u()}},"Stoppen"))):null})),Ce=Object(j.a)((function(){var e=Ee().game,t=e.players,r=e.roundHistory,a=e.resetGame;return O.a.createElement("div",{className:"card",style:{marginTop:"1rem"}},O.a.createElement("h5",{className:"card-header"},"Klaar!"),O.a.createElement("div",{className:"card-body"},O.a.createElement(ze,{players:t,rounds:r,reverse:!1}),O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col"},O.a.createElement("button",{className:"btn btn-success btn-block",type:"button",onClick:a},"Nieuw spel")))))})),Pe=Object(j.a)((function(){var e,t=Ee(),r=t.loaded,a=t.router,n=t.router.route;if(!r)return null;switch(a.refresh(),n){case C.New:e=O.a.createElement(ke,null);break;case C.Round:e=O.a.createElement(Ge,null);break;case C.Finished:e=O.a.createElement(Ce,null)}return O.a.createElement("div",{className:"container"},e)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(33);E.a.render(O.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.03f3df4a.chunk.js.map